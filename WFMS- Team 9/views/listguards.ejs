<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>List</title>
	<link rel="icon" href="images/favicon.ico">
    <!-- Bootstrap Core CSS -->
    <link href="/css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/css/admin.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="/css/plugins/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	    <script src="/js/angular.min.js"></script>

	 <link rel="stylesheet" href="/styles/kendo.common.min.css" />
    <link rel="stylesheet" href="/styles/kendo.moonlight.min.css" />
    <link rel="stylesheet" href="/styles/kendo.dataviz.min.css" />
    <link rel="stylesheet" href="/styles/kendo.dataviz.moonlight.min.css" />
    <link rel="stylesheet" href="/styles/kendo.moonlight.mobile.min.css" />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	<style>
	#header-page{
	background-image: url("textures/brushed-metal.png");
  background-image: url("textures/brushed-metal.png"),-webkit-linear-gradient(top,#2f3640 0,#212a33 100%);
  background-image: url("textures/brushed-metal.png"),-moz-linear-gradient(top,#2f3640 0,#212a33 100%);
  background-image: url("textures/brushed-metal.png"),-o-linear-gradient(top,#2f3640 0,#212a33 100%);
  background-image: url("textures/brushed-metal.png"),linear-gradient(to bottom,#2f3640 0,#212a33 100%);
  background-position: 50% 50%;
  background-color: #212a33;
  border-color: #171e28;
  }
  
  
  #pvGrid .k-grid-header .k-header
{
      color: #ee9f05;
}
  #incidentGrid .k-grid-header .k-header
{
      color: #ee9f05;
}
  #csGrid .k-grid-header .k-header
{
      color: #ee9f05;
}
  #msGrid .k-grid-header .k-header
{
      color: #ee9f05;
}

h5{
font-weight:bold;
font-size:14px;
}
	</style>
</head>

<body>

    <div id="wrapper">
        <!-- Navigation -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
           <a class="navbar-brand" href="index" style=""><img src="images/logos2.png" style="height:40px;width:120px;"/></a>
            </div>
            <!-- Top Menu Items -->
            <ul class="nav navbar-right top-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-envelope"></i> <b class="caret"></b></a>
                    <ul class="dropdown-menu message-dropdown">
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                      
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-footer">
                            <a href="#">Read All New Messages</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bell"></i> <b class="caret"></b></a>
                    <ul class="dropdown-menu alert-dropdown">
                        <li>
                            <a href="#">Alert Name <span class="label label-default">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-primary">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-success">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-info">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-warning">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-danger">Alert Badge</span></a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">View All</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> Sairam Nutheti <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="#"><i class="fa fa-fw fa-user"></i>Edit Profile</a>
                        </li>
                        <!-- <li>
                            <a href="#"><i class="fa fa-fw fa-envelope"></i> Inbox</a>
                        </li> -->
                        <li>
                            <a href="#"><i class="fa fa-fw fa-gear"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-power-off"></i> Log Out</a>
                        </li>
                    </ul>
                </li>
            </ul>
         
            <div class="collapse navbar-collapse navbar-ex1-collapse">
			
                <ul class="nav navbar-nav side-nav" >
					<li><h5 style="margin-top:15px;padding-left:20px;padding-bottom:10px;color:#fff;"><i class="fa fa-bars"></i> Navigation</h5></li>
						<li>
                            <a href="/createguard"><i class="fa fa-plus-circle"></i> Create Guard</a>
                        </li>
					   <!--  <li>
					                                <a href="/editguard"><i class="fa fa-pencil-square-o"></i> Edit Guard</a>							
					                            </li> -->
						 <li class="active">
                            <a href="/listguards"><i class="fa fa-list"></i> List</a>                                                      
                        </li>	
						<li>
                            <a href="/reports"><i class="fa fa-bar-chart-o fa-fw"></i> View Reports</a>                                                      
                        </li>		
						<!-- <li>
						                            <a href="/maps"><i class="fa fa-map-marker"></i> Locate Guard</a>                                                      
						                        </li>	 -->						
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>
 <div id="page-wrapper">
        	
            <div class="container-fluid">  
            <form name="log-form" id="log-form"  role="form" style="margin-left:15px;">          
				 <div class="row" > 
					  <div class="panel with-nav-tabs panel-default" style=""  > 
							<div class="panel-heading"  id="top-menu"  >
							  <ul class="nav nav-tabs" id="menu-tabs">
                           <li><a href="/index" >Home</a></li>
                            <li class="active"><a href="/createguard" >Guard</a></li>
                           <li><a href="/createclient" >Client</a></li>   
							  </ul>
							 </div>
					</div>
			</div>
			    
                <div class="row">
                    <div class="col-lg-12">                     
                        <ol class="breadcrumb" id="header-page">
                            <li>
                                <i class="fa fa-plus-circle"></i>&nbsp;&nbsp;Guards List
                            </li>
                        </ol>
                    </div>
                </div>    
                
                <div class="row">
                <div class="col-lg-12"  >
                <img src="images/guards.jpg" alt="clients" style="width:100%;height:120px;" border="2"  />
                </div>
                
                	<div class="col-lg-12" >      
                		   <div id="guardgrid"></div>
                		   
                	</div>
                </div>
                    
             <!-- /.panel-body -->
             </form>
             </div>      
            <!-- /.container-fluid -->
          	
				
        </div>
        <!-- /#page-wrapper -->
    </div>
    <!-- /#wrapper -->
    
    
    
<!-- Large modal -->

<div class="modal fade bs-example-modal-lg" tabindex="-1" id="infoModal" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg" style="width:65%">
    <div class="modal-content">
     <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Guard Info</h4> 	
      </div>
     <ol class="breadcrumb" id="modalheader-page">
                            <li>
                                <i class="fa fa-plus-circle"></i>&nbsp;&nbsp; Buildings Responsible For
                            </li>
     </ol>	
 	<div style="margin-left:10px;"> <!-- custom -->     	 
            		
				<div class='row'>      			
					  <div class="col-md-3">
					  <p class="align" style="font-weight:bold" >First Name</p>
					  <p class="align" style="font-weight:bold" >Last Name</p>
					  <p class="align" style="font-weight:bold" >Guard ID</p>
					  <p class="align" style="font-weight:bold" >Service Start Date</p>
					    <p class="align" style="font-weight:bold" >Service End Date</p>
					  </div>
					   <div class="col-md-3">
					  <p class="align" id="modal-firstname" >Sairam</p>
					  <p class="align" id="modal-lastname">Nutheti</p>
					  <p class="align" id="modal-guardId" >111-11-1111</p>
					  <p class="align" id="modal-guardstartdate">1/2/2015</p>
					   <p class="align"id="modal-guardenddate" >2/2/2016</p>
					  </div>
						<div class="col-md-3">
						 <p class="align" style="font-weight:bold" >Background Status</p>
						 <p class="align" style="font-weight:bold" >Phone Number</p>
					  <p class="align" style="font-weight:bold">Email</p>
					  <p class="align" style="font-weight:bold">Address</p>
					  </div>
					   <div class="col-md-3">
					    <p class="align" id="modal-status">Verified</p>
					   <p class="align" id="modal-phno">Phone Number</p>
					      <p class="align" id="modal-email"> Email</p>
					   <p class="align" id="modal-address1">Address Line1</p>
					   <p class="align" id="modal-address2">Address Line2</p>
					   <p class="align" id="modal-city">City</p>
					   <p class="align" id="modal-statezip">State-Zip</p>				   
					   </div>
				   
				  </div><!-- end of row  -->
				  
			</div> <!-- custom --> 
     	<!-- 	
     		  <ol class="breadcrumb" id="modalheader-page">
     		                            <li>
     		                                <i class="fa fa-plus-circle"></i>&nbsp;&nbsp; Property Info
     		                            </li>
     					</ol> -->	
 		<!-- <div style="margin-left:10px;" id="modal-buildings"> --> <!-- custom -->     	 
            		
				
     		<!-- </div> --><!-- custom -->    
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			        <!-- <button type="submit" class="btn btn-primary confirm" data-ng-click=saveSkill()>Save</button> -->
			      </div>
				
	

     
			
	 </div>
	</div>		   
  </div><!-- End -->
    
    
    
    
   <!-- jQuery -->
    <script src="/js/jquery.min.js"></script>
	 <script src="/kendojs/kendo.all.min.js"></script>
    <script src="/kendojs/kendo.timezones.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>
  	  <!-- Metis Menu Plugin JavaScript -->
    <script src="/js/metisMenu.min.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="/js/main.js"></script>

	
 

	
	
 <script>

$(document).ready(function () {

              //var crudServiceBaseUrl = "http://demos.telerik.com/kendo-ui/service",
                        dataSource = new kendo.data.DataSource({
                            transport: {
                                read:  {
                                    url: "/getguardlist",
                                    dataType: "json"
                                },
                                update:{
                                url: "/editguard",
                                    dataType: "json",
                                    type:"post"
                                },
                                destroy:{
                                 url: "/deleteguard",
                                    dataType: "json",
                                    type:"post"
                                },
                                
                                parameterMap: function(options, operation) {
                                    if (operation !== "read" && options.models) {
                                        return {models: kendo.stringify(options.models)};
                                    }
                                }
                            },
                            batch: true,
                            pageSize: 20,
                            schema: {
                                model: {
                                    id: "userId",
                                    fields: {
                                        UserId: { editable: false, nullable: true },
                                        firstName: { validation: { required: true } },
                                        lastName: { type: "string", validation: { required: true, min: 1} },                                        
                                        phno: { type: "string", validation: { min: 0, required: true } },                                   
                                         addressLine1: { type: "string", validation: { required: true, min: 1} }, 
                                          addressLine2: { type: "string" }, 
                                           city: { type: "string", validation: { required: true, min: 1} }, 
                                            state: { type: "string", validation: { required: true, min: 1} }, 
                                             zipCode: { type: "string", validation: { required: true, min: 1} },
                                             status:{type:"boolean"},
                                             startDate:{type:"date",validation: { required: true, min: 1} },
                                             endDate:{type:"date",validation: { required: true, min: 1} },
                                        
                                    }
                                }
                            }
                        });

 var wnd, detailsTemplate;
 $("#guardgrid").kendoGrid({
                    	dataSource: dataSource,
                        height: 500,
                         filterable: {
                            mode: "row"
                        },
                        
                        sortable: true,
                       // groupable:true,
                        pageable: {
                            refresh: true,
                            pageSizes: true,
                            buttonCount: 5
                        },
                         columns: [
                            { field:"firstName", title: "First Name" },
                            { field: "lastName", title:"Last Name" },                           
                            { field: "phno", title:"Phone Number"},
                            { field: "addressLine1", title:"Address Line1" ,hidden:true},
                            { field: "addressLine2", title:"Address Line2",hidden:true },
                            { field: "city", title:"City", hidden:true },
                            { field: "state", title:"State", width: "120px",hidden:true },
                            { field: "zipCode", title:"Zip Code", width: "120px",hidden:true },
                              { field: "status", title:"Back Ground Status", width: "120px",hidden:true },
                             { field: "startDate", title:"Start Date", width: "120px",hidden:true },
                            { field: "endDate", title:"End Date", width: "120px",hidden:true },
                             { command: ["edit",{ text: "View", click: showDetails },"destroy"], title: " ", width: "250px" }],
                        editable: "popup"
                    });
                    

     
/* function showDetails(e) 
{         e.preventDefault();          
          var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
          var clientId=dataItem.userId;         
      
}*/

  
  
  
  
  
       
 function showDetails(e) 
{         e.preventDefault();
          var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
          var guardId=dataItem.userId;         
         
                    
                    $.ajax({		
	 	 						method: 'post',
							 	 url: '/getguard',
							  	 data: { "guardId":guardId
							  		}
							})
							.success(function(response){	
									if(response.error==undefined)
									{									
										//alert(clientId);
										//alert(response.guard[0].guardId);
										$('#modal-firstname').text(response.guard[0].firstName);
										$('#modal-lastname').text(response.guard[0].lastName);
										$('#modal-email').text(response.guard[0].email);
										$('#modal-phno').text(response.guard[0].phno);
										$('#modal-guardstartdate').text(new Date(response.guard[0].startDate).toLocaleDateString());
										$('#modal-guardenddate').text(new Date(response.guard[0].endDate).toLocaleDateString());
										$('#modal-address1').text(response.guard[0].addressLine1);
										$('#modal-address2').text(response.guard[0].addressLine2);
										$('#modal-city').text(response.guard[0].city);
										$('#modal-statezip').text(response.guard[0].state+" - "+response.guard[0].zipCode);
										$('#modal-guardId').text(response.guard[0].userSSN);
										$('#modal-status').text(response.guard[0].status);	
										if(response.guard[0].userId!=undefined)
										{
										  /* $.ajax({		
						 	 						method: 'post',
												 	 url: '/guardbuildings',
												  	 data: { "guardId":response.guard[0].userId
												  		}
												})
												.success(function(response){	
												if(response.error==undefined && response.buildings!=undefined)
												{	
												 $('#infoModal').modal('show');	 
												
																for (i=0;i<response.buildings;i++)
													{
																
																$('#modal-buildings').append("<div class='row' id='building-row' style='padding-bottom:25px;'> "+     			
																		"<div class='col-md-3' style='border-top-style:dotted;border-width:1px;'>"+
																			"<p class='align' style='font-weight:bold'>Building Name</p>"+
																			
																		"</div>"+
																		" <div class='col-md-3' style='border-top-style:dotted;border-width:1px;'>"+
																			"<p class='align' >"+response.buildings[i].buildingName+"</p>"+
																			
																		"</div>"+
																		 "<div class='col-md-3' style='border-top-style:dotted;border-width:1px;'>"			+	
																			" <p class='align' style='font-weight:bold'>Address</p>"+
																		"</div>"+
																		"<div class='col-md-3' style='border-top-style:dotted;border-width:1px;'>"+
																		"	<p class='align'>"+response.buildings[i].addressLine1+"</p>"+
																			"<p class='align'>"+response.buildings[i].addressLine2+"</p>"+
																		"<p class='align'>"+response.buildings[i].city+"</p>"+
																			"<p class='align'>"+response.buildings[i].zipCode+"</p>"	+			   
																		" </div>"	+													 
															  
																	"</div>");	
																	
															}							 	
													
												}												
												.error(function(error){
											
												 });*/
										}
										else{
										
										$('#modal-buildings').append("<p class='align' style='font-weight:bold'>No Builings Assigned to this Guard</p>");
										}				
										$('#infoModal').modal('show');
										}	
											else{
												 $('#infoModal').modal('hide');
												alert("Something went wrong in the server");
										}
				})
					
		.error(function(error){
											
		 });
		    
}
});
 	</script>   
   
              
	
</body>

</html>